package database

import (
	"context"
	"database/sql"
)

// Querier is the common interface satisfied by both SQLite and PostgreSQL implementations.
// This interface is automatically generated by sqlc for both database engines.
type Querier interface {
	CreateNar(ctx context.Context, arg CreateNarParams) (Nar, error)
	CreateNarInfo(ctx context.Context, hash string) (NarInfo, error)
	DeleteNarByHash(ctx context.Context, hash string) (int64, error)
	DeleteNarByID(ctx context.Context, id int64) (int64, error)
	DeleteNarInfoByHash(ctx context.Context, hash string) (int64, error)
	DeleteNarInfoByID(ctx context.Context, id int64) (int64, error)
	GetLeastUsedNars(ctx context.Context, fileSize uint64) ([]Nar, error)
	GetNarByHash(ctx context.Context, hash string) (Nar, error)
	GetNarByID(ctx context.Context, id int64) (Nar, error)
	GetNarInfoByHash(ctx context.Context, hash string) (NarInfo, error)
	GetNarInfoByID(ctx context.Context, id int64) (NarInfo, error)
	GetNarTotalSize(ctx context.Context) (int64, error)
	TouchNar(ctx context.Context, hash string) (int64, error)
	TouchNarInfo(ctx context.Context, hash string) (int64, error)
	WithTx(tx *sql.Tx) Querier
	DB() *sql.DB
}
