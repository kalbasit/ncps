# Positive test: Migration with argocd mode and multiple replicas
# This should PASS validation - argocd mode is safe for HA
mode: deployment
replicaCount: 3

migration:
  enabled: true
  mode: argocd

config:
  hostname: "test.example.com"

  cdc:
    enabled: true

  storage:
    type: s3
    s3:
      bucket: my-bucket
      endpoint: https://s3.amazonaws.com
      region: us-east-1
      accessKeyId: test-key
      secretAccessKey: test-secret

  database:
    type: postgresql
    postgresql:
      host: postgres.example.com
      database: ncps
      username: ncps
      password: secret

  redis:
    enabled: true
    addresses:
      - redis:6379
